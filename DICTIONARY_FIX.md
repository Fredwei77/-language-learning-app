# Dictionary åŠŸèƒ½ä¿®å¤

## é—®é¢˜
Dictionary é¡µé¢æœç´¢åŠŸèƒ½æ— æ³•å·¥ä½œï¼Œæ— æ³•æ˜¾ç¤ºæŸ¥è¯¢ç»“æœã€‚

## æ ¹æœ¬åŸå› 
ä¸ AI Chat ç›¸åŒçš„é—®é¢˜ï¼šAPI å“åº”æ ¼å¼ç†è§£é”™è¯¯ã€‚

### API å®é™…è¿”å›æ ¼å¼
```typescript
// successResponse è¿”å›
{
  data: {
    result: {
      word: "...",
      phonetic: "...",
      definitions: [...],
      examples: [...],
      // ...
    }
  }
}
```

### ç»„ä»¶æœŸæœ›çš„æ ¼å¼ï¼ˆé”™è¯¯ï¼‰
```typescript
// âŒ é”™è¯¯çš„æœŸæœ›
{
  result: {
    word: "...",
    // ...
  }
}
```

## ä¿®å¤æ–¹æ¡ˆ

**æ–‡ä»¶**: `components/dictionary-search.tsx`

**ä¿®æ”¹å‰**:
```typescript
const data = await response.json()

if (data.error) {
  setError(data.error)
  setResult(null)
} else {
  setResult(data.result)  // âŒ é”™è¯¯ï¼šdata.result ä¸å­˜åœ¨
}
```

**ä¿®æ”¹å**:
```typescript
if (!response.ok) {
  const errorData = await response.json()
  throw new Error(errorData.error || `HTTP ${response.status}`)
}

const data = await response.json()

// API è¿”å›æ ¼å¼æ˜¯ { data: { result } }
if (data.error) {
  setError(data.error)
  setResult(null)
} else if (data.data && data.data.result) {
  setResult(data.data.result)  // âœ… æ­£ç¡®ï¼šè®¿é—® data.data.result
} else {
  throw new Error("Invalid response format")
}
```

## æ”¹è¿›å†…å®¹

1. **ä¿®å¤å“åº”æ•°æ®è®¿é—®è·¯å¾„**
   - ä» `data.result` æ”¹ä¸º `data.data.result`

2. **æ·»åŠ å“åº”çŠ¶æ€æ£€æŸ¥**
   - æ£€æŸ¥ `response.ok`
   - å¤„ç† HTTP é”™è¯¯çŠ¶æ€

3. **æ”¹è¿›é”™è¯¯å¤„ç†**
   - éªŒè¯å“åº”æ•°æ®ç»“æ„
   - æä¾›æ›´æ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯

## API å“åº”æµç¨‹

```
1. å‰ç«¯å‘é€è¯·æ±‚
   POST /api/dictionary
   Body: { word: "hello", language: "english" }

2. API è·¯ç”±å¤„ç†
   - éªŒè¯è¯·æ±‚
   - è°ƒç”¨ OpenRouter API
   - è§£æ AI è¿”å›çš„ JSON
   
3. è¿”å›å“åº”
   successResponse({
     result: {
       word: "hello",
       phonetic: "/hÉ™ËˆlÉ™ÊŠ/",
       definitions: [...],
       examples: [...],
       synonyms: [...]
     }
   })
   
4. å®é™…è¿”å›æ ¼å¼
   {
     data: {
       result: { ... }
     }
   }

5. å‰ç«¯è§£æ
   data.data.result  // è¯å…¸ç»“æœ
```

## æµ‹è¯•æ­¥éª¤

1. **åˆ·æ–°æµè§ˆå™¨é¡µé¢**
   - è®¿é—® `http://localhost:3000/dictionary`
   - æŒ‰ F5 åˆ·æ–°

2. **æµ‹è¯•è‹±è¯­æŸ¥è¯¢**
   - ç¡®ä¿é€‰æ‹©"è‹±è¯­"æ ‡ç­¾
   - è¾“å…¥ "hello"
   - ç‚¹å‡»æœç´¢æŒ‰é’®
   - **é¢„æœŸ**: æ˜¾ç¤ºå•è¯çš„è¯¦ç»†ä¿¡æ¯

3. **æµ‹è¯•ä¸­æ–‡æŸ¥è¯¢**
   - åˆ‡æ¢åˆ°"ä¸­æ–‡"æ ‡ç­¾
   - è¾“å…¥ "ä½ å¥½"
   - ç‚¹å‡»æœç´¢
   - **é¢„æœŸ**: æ˜¾ç¤ºè¯è¯­çš„è¯¦ç»†ä¿¡æ¯

4. **æµ‹è¯•ç²¤è¯­æŸ¥è¯¢**
   - åˆ‡æ¢åˆ°"ç²¤è¯­"æ ‡ç­¾
   - è¾“å…¥ç²¤è¯­è¯æ±‡
   - ç‚¹å‡»æœç´¢
   - **é¢„æœŸ**: æ˜¾ç¤ºç²¤è¯­è¯æ±‡ä¿¡æ¯

## åŠŸèƒ½ç‰¹æ€§

### æ”¯æŒçš„è¯­è¨€
- âœ… è‹±è¯­ (English)
- âœ… ä¸­æ–‡ (Chinese)
- âœ… ç²¤è¯­ (Cantonese)

### æ˜¾ç¤ºå†…å®¹
- å•è¯/è¯è¯­
- éŸ³æ ‡/æ‹¼éŸ³
- è¯æ€§
- é‡Šä¹‰
- ä¾‹å¥
- åŒä¹‰è¯
- ç‰›æ´¥ç­‰çº§ï¼ˆè‹±è¯­ï¼‰

### äº¤äº’åŠŸèƒ½
- ğŸ” æœç´¢æŸ¥è¯¢
- ğŸ”Š å‘éŸ³æœ—è¯»
- ğŸ“‹ ç»“æœå±•ç¤º
- âš ï¸ é”™è¯¯æç¤º

## ç›¸å…³ä»£ç 

### API è·¯ç”±
**æ–‡ä»¶**: `app/api/dictionary/route.ts`
```typescript
return successResponse({ result })
// è¿”å›æ ¼å¼ï¼š{ data: { result } }
```

### å‰ç«¯ç»„ä»¶
**æ–‡ä»¶**: `components/dictionary-search.tsx`
```typescript
const data = await response.json()
// è®¿é—® data.data.result
setResult(data.data.result)
```

## éªŒè¯æ¸…å•

- [x] ä¿®å¤å“åº”æ•°æ®è®¿é—®è·¯å¾„
- [x] æ·»åŠ å“åº”çŠ¶æ€æ£€æŸ¥
- [x] æ”¹è¿›é”™è¯¯å¤„ç†
- [ ] åˆ·æ–°æµè§ˆå™¨æµ‹è¯•
- [ ] æµ‹è¯•è‹±è¯­æŸ¥è¯¢
- [ ] æµ‹è¯•ä¸­æ–‡æŸ¥è¯¢
- [ ] æµ‹è¯•ç²¤è¯­æŸ¥è¯¢
- [ ] æµ‹è¯•å‘éŸ³åŠŸèƒ½

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæŸ¥è¯¢å¾ˆæ…¢ï¼Ÿ
A: å› ä¸ºä½¿ç”¨ AI ç”Ÿæˆè¯å…¸å†…å®¹ï¼Œéœ€è¦ 2-5 ç§’ã€‚è¿™æ˜¯æ­£å¸¸çš„ã€‚

### Q: æŸ¥è¯¢å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: 
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. ç¡®è®¤ OPENROUTER_API_KEY å·²é…ç½®
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„é”™è¯¯ä¿¡æ¯

### Q: å¯ä»¥æŸ¥è¯¢ä»»ä½•å•è¯å—ï¼Ÿ
A: æ˜¯çš„ï¼ŒAI ä¼šå°½åŠ›æä¾›ä¿¡æ¯ï¼Œä½†ç”Ÿåƒ»è¯å¯èƒ½ä¸å¤Ÿå‡†ç¡®ã€‚

### Q: å‘éŸ³åŠŸèƒ½å¦‚ä½•ä½¿ç”¨ï¼Ÿ
A: ç‚¹å‡»ç»“æœä¸­çš„"æœ—è¯»"æŒ‰é’®ï¼Œä½¿ç”¨æµè§ˆå™¨çš„è¯­éŸ³åˆæˆåŠŸèƒ½ã€‚

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æ·»åŠ ç¼“å­˜**
   - ç¼“å­˜å¸¸ç”¨è¯æ±‡çš„æŸ¥è¯¢ç»“æœ
   - å‡å°‘ API è°ƒç”¨æ¬¡æ•°

2. **æ·»åŠ å†å²è®°å½•**
   - ä¿å­˜æŸ¥è¯¢å†å²
   - å¿«é€Ÿè®¿é—®ä¹‹å‰æŸ¥è¯¢çš„è¯æ±‡

3. **é¢„åŠ è½½å¸¸ç”¨è¯**
   - é¢„å…ˆåŠ è½½é«˜é¢‘è¯æ±‡
   - æä¾›ç¦»çº¿æŸ¥è¯¢èƒ½åŠ›

4. **ä¼˜åŒ– AI æç¤ºè¯**
   - å‡å°‘è¿”å›å†…å®¹çš„é•¿åº¦
   - é™ä½ token ä½¿ç”¨

## ä¸ AI Chat çš„ç›¸ä¼¼æ€§

ä¸¤ä¸ªåŠŸèƒ½éƒ½é‡åˆ°äº†ç›¸åŒçš„é—®é¢˜ï¼š

| åŠŸèƒ½ | é—®é¢˜ | ä¿®å¤ |
|------|------|------|
| AI Chat | `data.message` â†’ `data.data.message` | âœ… å·²ä¿®å¤ |
| Dictionary | `data.result` â†’ `data.data.result` | âœ… å·²ä¿®å¤ |

**æ ¹æœ¬åŸå› **: éƒ½æ˜¯å› ä¸º `successResponse` å‡½æ•°å°†æ•°æ®åŒ…è£…åœ¨ `data` å­—æ®µä¸­ã€‚

## æ€»ç»“

Dictionary åŠŸèƒ½å·²ä¿®å¤ï¼ä¸»è¦æ”¹åŠ¨ï¼š
- âœ… ä¿®å¤å“åº”æ•°æ®è®¿é—®è·¯å¾„
- âœ… æ·»åŠ é”™è¯¯å¤„ç†
- âœ… æ”¹è¿›å“åº”éªŒè¯

**ç°åœ¨åˆ·æ–°æµè§ˆå™¨é¡µé¢ï¼ŒDictionary åŠŸèƒ½åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œäº†ï¼** ğŸ‰

## ä¸‹ä¸€æ­¥

å»ºè®®æ£€æŸ¥å…¶ä»–å¯èƒ½ä½¿ç”¨ `successResponse` çš„ APIï¼š
- [ ] Pronunciation API
- [ ] Coins API
- [ ] Profile API
- [ ] å…¶ä»– API

ç¡®ä¿å®ƒä»¬çš„å‰ç«¯ç»„ä»¶éƒ½æ­£ç¡®è®¿é—® `data.data.*` è€Œä¸æ˜¯ `data.*`ã€‚
