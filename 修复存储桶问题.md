# ğŸ”§ ä¿®å¤"Bucket not found"é”™è¯¯

## é—®é¢˜
ä¸Šä¼ å•†å“å›¾ç‰‡æ—¶æ˜¾ç¤ºï¼š**"Bucket not found"**ï¼ˆå­˜å‚¨æ¡¶æœªæ‰¾åˆ°ï¼‰

## åŸå› 
Supabase Storage ä¸­è¿˜æ²¡æœ‰åˆ›å»º `gift-images` å­˜å‚¨æ¡¶ã€‚

---

## âœ… è§£å†³æ–¹æ³•ï¼ˆé€‰æ‹©å…¶ä¸­ä¸€ç§ï¼‰

### æ–¹æ³•1: åœ¨ Supabase Dashboard ä¸­åˆ›å»ºï¼ˆæ¨èï¼‰â­

#### ç¬¬1æ­¥ï¼šæ‰“å¼€ Supabase
1. è®¿é—® https://supabase.com/dashboard
2. ç™»å½•ä½ çš„è´¦å·
3. é€‰æ‹©ä½ çš„é¡¹ç›®

#### ç¬¬2æ­¥ï¼šè¿›å…¥ Storage
- ç‚¹å‡»å·¦ä¾§èœå•çš„ **Storage** å›¾æ ‡

#### ç¬¬3æ­¥ï¼šåˆ›å»º Bucket
1. ç‚¹å‡»å³ä¸Šè§’çš„ **"New bucket"** æŒ‰é’®
2. å¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š
   ```
   Name: gift-images
   Public bucket: âœ… å¿…é¡»å‹¾é€‰
   File size limit: 5242880
   Allowed MIME types: image/*
   ```

3. ç‚¹å‡» **"Create bucket"** æŒ‰é’®

#### ç¬¬4æ­¥ï¼šéªŒè¯
- åœ¨ Storage é¡µé¢åº”è¯¥èƒ½çœ‹åˆ° `gift-images` bucket
- çŠ¶æ€æ˜¾ç¤ºä¸º Public

---

### æ–¹æ³•2: ä½¿ç”¨ SQL åˆ›å»º

#### ç¬¬1æ­¥ï¼šæ‰“å¼€ SQL Editor
1. åœ¨ Supabase Dashboard ä¸­
2. ç‚¹å‡»å·¦ä¾§èœå•çš„ **SQL Editor**

#### ç¬¬2æ­¥ï¼šæ‰§è¡Œ SQL
1. ç‚¹å‡» **"New query"**
2. å¤åˆ¶å¹¶ç²˜è´´ `scripts/create-gift-images-bucket.sql` æ–‡ä»¶ä¸­çš„å†…å®¹
3. ç‚¹å‡» **"Run"** æŒ‰é’®

#### ç¬¬3æ­¥ï¼šæŸ¥çœ‹ç»“æœ
- åº”è¯¥æ˜¾ç¤º "âœ… Bucket åˆ›å»ºæˆåŠŸï¼"
- ç¡®è®¤ bucket ä¿¡æ¯æ­£ç¡®

---

## ğŸ§ª æµ‹è¯•ä¸Šä¼ 

åˆ›å»º bucket åï¼Œæµ‹è¯•ä¸Šä¼ åŠŸèƒ½ï¼š

1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š
   ```bash
   npm run dev
   ```

2. è®¿é—®ç®¡ç†åå°ï¼š
   ```
   http://localhost:3000/admin/gifts
   ```

3. ç‚¹å‡»"æ·»åŠ å•†å“"æŒ‰é’®

4. ç‚¹å‡»"ä¸Šä¼ å›¾ç‰‡"ï¼Œé€‰æ‹©ä¸€å¼ å›¾ç‰‡

5. åº”è¯¥æˆåŠŸä¸Šä¼ å¹¶æ˜¾ç¤ºé¢„è§ˆ âœ…

---

## ğŸ” éªŒè¯ Bucket æ˜¯å¦åˆ›å»ºæˆåŠŸ

### åœ¨ Dashboard ä¸­æŸ¥çœ‹
- Storage â†’ Buckets â†’ åº”è¯¥çœ‹åˆ° `gift-images`

### ä½¿ç”¨ SQL æŸ¥è¯¢
åœ¨ SQL Editor ä¸­æ‰§è¡Œï¼š
```sql
SELECT 
  id,
  name,
  public,
  file_size_limit
FROM storage.buckets
WHERE id = 'gift-images';
```

é¢„æœŸç»“æœï¼š
```
id: gift-images
name: gift-images
public: true
file_size_limit: 5242880
```

---

## ğŸ“‹ Bucket é…ç½®è¯´æ˜

| é…ç½®é¡¹ | å€¼ | è¯´æ˜ |
|--------|-----|------|
| Name | `gift-images` | å­˜å‚¨æ¡¶åç§° |
| Public | `true` | å¿…é¡»ä¸ºå…¬å¼€ï¼Œå¦åˆ™å›¾ç‰‡æ— æ³•æ˜¾ç¤º |
| File size limit | `5242880` | 5MBï¼Œå•ä¸ªæ–‡ä»¶æœ€å¤§å¤§å° |
| Allowed MIME types | `image/*` | åªå…è®¸å›¾ç‰‡æ–‡ä»¶ |

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: åˆ›å»ºåä»ç„¶æ˜¾ç¤º"Bucket not found"ï¼Ÿ
**è§£å†³æ–¹æ³•ï¼š**
1. åˆ·æ–°æµè§ˆå™¨é¡µé¢
2. ç¡®è®¤ bucket åç§°æ˜¯ `gift-images`ï¼ˆä¸æ˜¯ `gift_images` æˆ–å…¶ä»–ï¼‰
3. ç¡®è®¤ Public é€‰é¡¹å·²å‹¾é€‰

### Q2: å›¾ç‰‡ä¸Šä¼ æˆåŠŸä½†æ— æ³•æ˜¾ç¤ºï¼Ÿ
**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥ bucket çš„ Public é€‰é¡¹æ˜¯å¦å‹¾é€‰
2. åœ¨æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
3. ç¡®è®¤å›¾ç‰‡ URL æ ¼å¼æ­£ç¡®

### Q3: æç¤ºæƒé™é”™è¯¯ï¼Ÿ
**è§£å†³æ–¹æ³•ï¼š**
1. ç¡®è®¤ä½ å·²ç™»å½•ç®¡ç†å‘˜è´¦å·
2. æ£€æŸ¥ `profiles` è¡¨ä¸­ä½ çš„ `is_admin` å­—æ®µæ˜¯å¦ä¸º `true`
3. é‡æ–°ç™»å½•è¯•è¯•

---

## ğŸ‰ å®Œæˆ

åˆ›å»º bucket åï¼Œä½ å°±å¯ä»¥ï¼š
- âœ… ä¸Šä¼ å•†å“å›¾ç‰‡
- âœ… å›¾ç‰‡è‡ªåŠ¨å­˜å‚¨åœ¨ Supabase
- âœ… è·å¾—å…¬å¼€è®¿é—® URL
- âœ… åœ¨å•†åŸä¸­å±•ç¤ºå›¾ç‰‡

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

- `scripts/create-gift-images-bucket.sql` - SQL åˆ›å»ºè„šæœ¬
- `app/api/gifts/upload/route.ts` - å›¾ç‰‡ä¸Šä¼  API
- `GIFT_SHOP_BACKEND_SETUP.md` - å•†å“ç³»ç»Ÿå®Œæ•´æŒ‡å—

---

**ç°åœ¨å°±å» Supabase Dashboard åˆ›å»º bucket å§ï¼** ğŸš€
