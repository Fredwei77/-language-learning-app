# Supabase é‚®ç®±éªŒè¯é…ç½®æŒ‡å—

## ğŸš€ å¿«é€Ÿé…ç½®ï¼ˆ5åˆ†é’Ÿå®Œæˆï¼‰

### ç¬¬ä¸€æ­¥ï¼šé…ç½® Supabase é‡å®šå‘ URL

1. **æ‰“å¼€ Supabase Dashboard**
   - è®¿é—®ï¼šhttps://supabase.com/dashboard
   - é€‰æ‹©ä½ çš„é¡¹ç›®

2. **è¿›å…¥ URL é…ç½®**
   ```
   å·¦ä¾§èœå• â†’ Authentication â†’ URL Configuration
   ```

3. **æ·»åŠ é‡å®šå‘ URL**
   
   åœ¨ **Redirect URLs** éƒ¨åˆ†ï¼Œç‚¹å‡» **Add URL**ï¼Œæ·»åŠ ä»¥ä¸‹åœ°å€ï¼š

   **å¦‚æœä½¿ç”¨ Netlifyï¼ˆæ¨èï¼‰ï¼š**
   ```
   https://ä½ çš„ç½‘ç«™åŸŸå.netlify.app/auth/callback
   ```
   
   **å¦‚æœä½¿ç”¨è‡ªå®šä¹‰åŸŸåï¼š**
   ```
   https://ä½ çš„åŸŸå.com/auth/callback
   ```

   **æœ¬åœ°å¼€å‘ï¼ˆå¯é€‰ï¼‰ï¼š**
   ```
   http://localhost:3000/auth/callback
   ```

4. **è®¾ç½® Site URL**
   
   åœ¨ **Site URL** éƒ¨åˆ†ï¼Œè®¾ç½®ä¸ºï¼š
   ```
   https://ä½ çš„ç½‘ç«™åŸŸå.netlify.app
   ```
   æˆ–
   ```
   https://ä½ çš„åŸŸå.com
   ```

5. **ä¿å­˜é…ç½®**
   - ç‚¹å‡»é¡µé¢åº•éƒ¨çš„ **Save** æŒ‰é’®
   - ç­‰å¾…å‡ ç§’é’Ÿè®©é…ç½®ç”Ÿæ•ˆ

### ç¬¬äºŒæ­¥ï¼šéƒ¨ç½²ä»£ç 

```bash
# æäº¤æ›´æ”¹
git add -A
git commit -m "ä¿®å¤æ³¨å†Œé‚®ç®±éªŒè¯åŠŸèƒ½"
git push origin main
```

### ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•æ³¨å†Œ

1. è®¿é—®ä½ çš„ç½‘ç«™æ³¨å†Œé¡µé¢
2. å¡«å†™é‚®ç®±å’Œå¯†ç 
3. ç‚¹å‡»æ³¨å†Œ
4. æ£€æŸ¥é‚®ç®±
5. ç‚¹å‡»éªŒè¯é“¾æ¥
6. åº”è¯¥çœ‹åˆ°"éªŒè¯æˆåŠŸ"é¡µé¢

## ğŸ“‹ é…ç½®æ£€æŸ¥æ¸…å•

- [ ] Supabase Redirect URLs å·²æ·»åŠ 
- [ ] Supabase Site URL å·²è®¾ç½®
- [ ] ä»£ç å·²éƒ¨ç½²åˆ° Netlify
- [ ] ç¯å¢ƒå˜é‡å·²é…ç½®
- [ ] æµ‹è¯•æ³¨å†Œæµç¨‹æˆåŠŸ

## ğŸ” æŸ¥æ‰¾ä½ çš„ Netlify åŸŸå

### æ–¹æ³• 1ï¼šNetlify Dashboard
1. ç™»å½• Netlify
2. é€‰æ‹©ä½ çš„ç½‘ç«™
3. æŸ¥çœ‹ **Site overview** é¡µé¢
4. åŸŸåæ˜¾ç¤ºåœ¨é¡¶éƒ¨ï¼Œæ ¼å¼å¦‚ï¼š`your-site-name.netlify.app`

### æ–¹æ³• 2ï¼šä» Git ä»“åº“
1. æ‰“å¼€ä½ çš„ GitHub ä»“åº“
2. æŸ¥çœ‹ README æˆ– About éƒ¨åˆ†
3. é€šå¸¸ä¼šæ˜¾ç¤ºéƒ¨ç½²çš„ç½‘ç«™é“¾æ¥

### æ–¹æ³• 3ï¼šä»éƒ¨ç½²æ—¥å¿—
1. æŸ¥çœ‹æœ€è¿‘çš„ Git commit
2. GitHub Actions æˆ– Netlify ä¼šæ˜¾ç¤ºéƒ¨ç½²çš„ URL

## ğŸ“¸ é…ç½®æˆªå›¾ç¤ºä¾‹

### Supabase URL Configuration é¡µé¢åº”è¯¥è¿™æ ·é…ç½®ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Site URL                                            â”‚
â”‚ https://your-site.netlify.app                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Redirect URLs                                       â”‚
â”‚ https://your-site.netlify.app/auth/callback        â”‚
â”‚ http://localhost:3000/auth/callback (optional)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âš ï¸ å¸¸è§é”™è¯¯

### é”™è¯¯ 1: "Invalid Redirect URL"
**åŸå› ï¼š** URL æ ¼å¼ä¸æ­£ç¡®æˆ–æœªæ·»åŠ åˆ°ç™½åå•

**è§£å†³ï¼š**
- ç¡®ä¿ URL ä»¥ `https://` å¼€å¤´ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- ç¡®ä¿ URL å®Œå…¨åŒ¹é…ï¼ˆåŒ…æ‹¬ `/auth/callback`ï¼‰
- ä¿å­˜åç­‰å¾…å‡ åˆ†é’Ÿ

### é”™è¯¯ 2: "ERR_CONNECTION_REFUSED"
**åŸå› ï¼š** ä½¿ç”¨äº† localhost URL ä½†ç½‘ç«™å·²éƒ¨ç½²

**è§£å†³ï¼š**
- ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒçš„ URLï¼ˆNetlify åŸŸåï¼‰
- ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ localhost

### é”™è¯¯ 3: éªŒè¯é“¾æ¥ 404
**åŸå› ï¼š** å›è°ƒè·¯ç”±æœªéƒ¨ç½²

**è§£å†³ï¼š**
- ç¡®è®¤ä»£ç å·²æ¨é€åˆ° Git
- ç­‰å¾… Netlify éƒ¨ç½²å®Œæˆ
- æ£€æŸ¥ `app/auth/callback/route.ts` æ–‡ä»¶å­˜åœ¨

## ğŸ¯ å®Œæ•´çš„ URL ç¤ºä¾‹

å‡è®¾ä½ çš„ Netlify ç½‘ç«™æ˜¯ï¼š`https://my-language-app.netlify.app`

### Supabase é…ç½®ï¼š
```
Site URL: https://my-language-app.netlify.app

Redirect URLs:
- https://my-language-app.netlify.app/auth/callback
- http://localhost:3000/auth/callback (å¼€å‘ç”¨)
```

### æ³¨å†Œæµç¨‹ URLï¼š
1. æ³¨å†Œé¡µé¢ï¼š`https://my-language-app.netlify.app/auth/register`
2. é‚®ä»¶é“¾æ¥ï¼š`https://my-language-app.netlify.app/auth/callback?code=xxx`
3. éªŒè¯æˆåŠŸï¼š`https://my-language-app.netlify.app/auth/confirm`
4. ç™»å½•é¡µé¢ï¼š`https://my-language-app.netlify.app/auth/login`

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. æœ¬åœ°æµ‹è¯•ï¼ˆå¯é€‰ï¼‰
```bash
npm run dev
# è®¿é—® http://localhost:3000/auth/register
```

### 2. ç”Ÿäº§ç¯å¢ƒæµ‹è¯•
1. è®¿é—® `https://ä½ çš„åŸŸå/auth/register`
2. ä½¿ç”¨çœŸå®é‚®ç®±æ³¨å†Œ
3. æ£€æŸ¥é‚®ç®±ï¼ˆåŒ…æ‹¬åƒåœ¾é‚®ä»¶æ–‡ä»¶å¤¹ï¼‰
4. ç‚¹å‡»éªŒè¯é“¾æ¥
5. åº”è¯¥çœ‹åˆ°æˆåŠŸé¡µé¢

## ğŸ’¡ æç¤º

### é‚®ä»¶å¯èƒ½åœ¨åƒåœ¾é‚®ä»¶æ–‡ä»¶å¤¹
- æ£€æŸ¥åƒåœ¾é‚®ä»¶/ä¿ƒé”€é‚®ä»¶æ–‡ä»¶å¤¹
- å°† noreply@mail.supabase.io æ·»åŠ åˆ°è”ç³»äºº

### é‚®ä»¶å‘é€å»¶è¿Ÿ
- é‚®ä»¶å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ‰èƒ½é€è¾¾
- å¦‚æœè¶…è¿‡ 5 åˆ†é’Ÿæœªæ”¶åˆ°ï¼Œæ£€æŸ¥é‚®ç®±åœ°å€æ˜¯å¦æ­£ç¡®

### å¼€å‘ç¯å¢ƒé™åˆ¶
- Supabase å…è´¹ç‰ˆæ¯å°æ—¶é™åˆ¶ 4 å°é‚®ä»¶
- å¦‚æœè¶…é™ï¼Œç­‰å¾…ä¸€å°æ—¶åé‡è¯•

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé…ç½®åä»æœ‰é—®é¢˜ï¼š

1. **æ£€æŸ¥æµè§ˆå™¨ Console**
   - æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
   - æŸ¥çœ‹ Console æ ‡ç­¾çš„é”™è¯¯ä¿¡æ¯

2. **æ£€æŸ¥ Supabase æ—¥å¿—**
   - Supabase Dashboard â†’ Logs
   - æŸ¥çœ‹è®¤è¯ç›¸å…³çš„é”™è¯¯

3. **æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£**
   - å‚è€ƒ `REGISTRATION_FIX.md` è·å–è¯¦ç»†æ•…éšœæ’é™¤

## âœ… é…ç½®å®Œæˆå

é…ç½®æˆåŠŸåï¼Œä½ çš„ç”¨æˆ·å¯ä»¥ï¼š
- âœ… æ³¨å†Œæ–°è´¦å·
- âœ… æ”¶åˆ°éªŒè¯é‚®ä»¶
- âœ… ç‚¹å‡»é“¾æ¥éªŒè¯é‚®ç®±
- âœ… ç™»å½•ä½¿ç”¨ç½‘ç«™

---

**é…ç½®æ—¶é—´ï¼š** çº¦ 5 åˆ†é’Ÿ  
**éš¾åº¦ï¼š** â­â­â˜†â˜†â˜†ï¼ˆç®€å•ï¼‰  
**å¿…éœ€ï¼š** âœ… æ˜¯ï¼ˆæ³¨å†ŒåŠŸèƒ½å¿…éœ€ï¼‰
