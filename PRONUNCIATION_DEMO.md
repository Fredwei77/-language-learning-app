# 发音评测组件演示

## 快速开始

### 1. 访问页面
```
http://localhost:3000/pronunciation
```

### 2. 主要功能演示

#### 语言切换
1. 点击右上角的语言切换器（地球图标）
2. 选择中文或英文
3. 页面所有文本自动切换

#### 发音练习流程
1. **查看练习内容**
   - 显示英文句子
   - 显示音标
   - 显示中文翻译

2. **听示范发音**
   - 点击"听示范"按钮
   - 系统播放标准发音

3. **开始录音**
   - 点击中央的麦克风按钮
   - 按钮变红表示正在录音
   - 清晰朗读句子

4. **停止录音**
   - 再次点击麦克风按钮
   - 系统自动识别并评测

5. **查看结果**
   - 综合得分（0-100）
   - 准确度、流畅度、发音三项详细评分
   - 正面反馈
   - 改进建议

#### 金币奖励
- 练习时长自动累计
- 进度条显示当前进度
- 达到30分钟自动获得100金币
- 金币爆炸动画效果

## 界面布局

```
┌─────────────────────────────────────────────────────┐
│ 标题栏                    [语言切换] [金币: 1000]    │
├─────────────────────────────────────────────────────┤
│ 今日练习进度                                         │
│ ⏱️ 15 / 30 分钟  ████████░░░░░░░░ 50%              │
├──────────────────────────┬──────────────────────────┤
│ 练习区域                  │ 指导区域                  │
│                          │                          │
│ [简单] [greeting]        │ 💰 金币奖励               │
│                          │ 完成30分钟获得100金币      │
│ 请朗读以下内容  [听示范]   │                          │
│ ┌──────────────────────┐ │ 📝 练习提示               │
│ │ Hello, how are you?  │ │ 1. 先听示范               │
│ │ /həˈləʊ haʊ ɑː juː/  │ │ 2. 开始录音               │
│ │ 你好，你今天怎么样？    │ │ 3. 清晰朗读               │
│ └──────────────────────┘ │ 4. 停止录音               │
│                          │ 5. 查看结果               │
│      [🎤 开始录音]        │                          │
│                          │ 📊 评分标准               │
│ 评测结果                  │ 优秀: 90-100             │
│ ┌──────────────────────┐ │ 良好: 70-89              │
│ │   综合得分: 85       │ │ 需改进: 0-69             │
│ └──────────────────────┘ │                          │
│ 准确度: 88  流畅度: 82   │ 💡 练习建议               │
│ 发音: 85                 │ • 每天15-20分钟           │
│                          │ • 从简单句子开始           │
└──────────────────────────┴──────────────────────────┘
```

## 组件特点

### 🌍 完整国际化
- ✅ 所有文本支持中英文
- ✅ 实时语言切换
- ✅ 保存语言偏好

### 🎤 智能语音识别
- ✅ 浏览器原生 Web Speech API
- ✅ 实时语音转文字
- ✅ 自动权限检测

### 🤖 AI 评测
- ✅ 多维度评分
- ✅ 详细反馈
- ✅ 改进建议

### 💰 金币激励
- ✅ 练习时长追踪
- ✅ 每日目标奖励
- ✅ 进度可视化
- ✅ 金币爆炸动画

### 📱 响应式设计
- ✅ 移动端适配
- ✅ 平板优化
- ✅ 桌面端多列布局

## 测试场景

### 场景 1: 新用户首次使用
1. 打开页面，看到中文界面
2. 点击语言切换器，切换到英文
3. 系统提示请求麦克风权限
4. 允许权限后开始练习

### 场景 2: 完成一次练习
1. 点击"听示范"熟悉发音
2. 点击麦克风开始录音
3. 朗读句子
4. 停止录音
5. 查看评测结果和建议
6. 点击"下一题"继续练习

### 场景 3: 获得金币奖励
1. 持续练习30分钟
2. 进度条达到100%
3. 触发金币爆炸动画
4. 显示"今日已完成！获得100金币"

### 场景 4: 语言切换
1. 在中文界面练习
2. 点击语言切换器
3. 选择英文
4. 所有文本立即切换为英文
5. 练习状态保持不变

## 技术实现

### 核心技术栈
- **React Hooks**: useState, useRef, useEffect
- **Web Speech API**: 语音识别和合成
- **国际化**: useLocale hook
- **UI 组件**: shadcn/ui

### 关键代码片段

#### 语音识别初始化
```typescript
const SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition
const recognition = new SpeechRecognition()
recognition.lang = "en-US"
recognition.continuous = false
recognition.interimResults = false
```

#### 语言切换
```typescript
const { locale, t } = useLocale()
// t.pronunciation.title 自动返回当前语言的翻译
```

#### 金币奖励
```typescript
const result = addPracticeTime(sessionSeconds)
if (result.canExplode) {
  setShowExplosion(true)
  setEarnedCoins(result.earnedCoins)
}
```

## 浏览器支持

| 浏览器 | 语音识别 | 语音合成 | 推荐度 |
|--------|---------|---------|--------|
| Chrome | ✅ | ✅ | ⭐⭐⭐⭐⭐ |
| Edge | ✅ | ✅ | ⭐⭐⭐⭐⭐ |
| Safari | ✅ | ✅ | ⭐⭐⭐⭐ |
| Firefox | ⚠️ | ✅ | ⭐⭐⭐ |

## 常见问题

### Q: 为什么麦克风无法使用？
A: 
1. 检查浏览器是否允许麦克风权限
2. 确保使用 HTTPS 或 localhost
3. 检查设备麦克风是否正常工作

### Q: 语音识别不准确怎么办？
A:
1. 确保环境安静
2. 清晰发音，语速适中
3. 靠近麦克风
4. 尝试使用 Chrome 浏览器

### Q: 语言切换后练习进度会丢失吗？
A: 不会，练习时长和金币数据保存在 localStorage 中，切换语言不影响。

### Q: 可以添加自定义练习内容吗？
A: 可以，修改 `practiceItems` 数组即可添加自定义句子。

## 性能优化

1. **使用 useRef 管理语音识别实例**
   - 避免重复创建
   - 防止内存泄漏

2. **及时清理定时器**
   - useEffect 返回清理函数
   - 组件卸载时清理

3. **条件渲染**
   - 只在需要时渲染评测结果
   - 减少不必要的 DOM 更新

4. **防抖和节流**
   - 避免频繁的状态更新
   - 优化用户体验

## 下一步

1. **添加更多练习内容**
   - 不同难度级别
   - 不同主题分类
   - 自定义文本输入

2. **增强评测功能**
   - 单词级别的发音分析
   - 语调和重音检测
   - 发音可视化

3. **社交功能**
   - 分享评测结果
   - 好友排行榜
   - 挑战模式

4. **数据分析**
   - 练习历史记录
   - 进步曲线图
   - 弱点分析

## 相关链接

- [完整实现指南](./PRONUNCIATION_I18N_GUIDE.md)
- [国际化文档](./I18N_IMPLEMENTATION.md)
- [金币系统](./lib/coins-system.ts)
